<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Quick Start - Belinda User Guide</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
                <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="quick_start.html" class="active"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="gather_statistics.html"><strong aria-hidden="true">2.1.</strong> Gathering Statistics</a></li></ol></li><li class="chapter-item expanded "><a href="clustering_formats.html"><strong aria-hidden="true">3.</strong> Clustering Formats and IO</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="singleton_handling.html"><strong aria-hidden="true">3.1.</strong> Singleton Handling</a></li></ol></li><li class="chapter-item expanded "><a href="reference.html"><strong aria-hidden="true">4.</strong> API Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="predefined_statistics.html"><strong aria-hidden="true">4.1.</strong> Predefined Statistics</a></li><li class="chapter-item expanded "><a href="graph_analytics.html"><strong aria-hidden="true">4.2.</strong> Graph Analytics</a></li></ol></li><li class="chapter-item expanded "><a href="cookbook.html"><strong aria-hidden="true">5.</strong> Cookbook</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="conversion_to_parquet.html"><strong aria-hidden="true">5.1.</strong> Conversion to Parquet</a></li><li class="chapter-item expanded "><a href="filtering_out_clusters.html"><strong aria-hidden="true">5.2.</strong> Filtering out Clusters</a></li><li class="chapter-item expanded "><a href="basic_eda.html"><strong aria-hidden="true">5.3.</strong> Basic EDA</a></li></ol></li><li class="chapter-item expanded "><a href="acknowledgements.html"><strong aria-hidden="true">6.</strong> Acknowledgements</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Belinda User Guide</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h1>
<p>For each cluster, Belinda defines the following variables:</p>
<ul>
<li>\(n\) is the number of nodes in a cluster</li>
<li>\(m\) is the number of internal edges in a cluster</li>
<li>\(c\) is the number of external edges in a cluster</li>
</ul>
<p>These variables are quite expressive. For example, the degree volume \(vol(C) = 2 m + c\)
is the sum of (global) degree of each node inside the cluster, and as shown can be expressed
through two of the above variables. Similarly, the intra-cluster conductance can also be expressed
through the above variables (combined with <code>g.n</code>).</p>
<h2 id="brief-examples-of-polars"><a class="header" href="#brief-examples-of-polars">Brief examples of Polars</a></h2>
<p>Polars is a data frames library for Python. Belinda is built upon Polars. For those unfamiliar
with Polars, let’s look at some very minimal operations to bridge the gap. For more, check out <a href="https://pola-rs.github.io/polars-book/user-guide/index.html">their guide</a>.</p>
<h3 id="creating-a-data-frame"><a class="header" href="#creating-a-data-frame">Creating a data frame</a></h3>
<p>Let’s just load the iris dataset:</p>
<pre><code class="language-python">import polars as pl
df = pl.read_csv(&quot;https://j.mp/iriscsv&quot;)
df.head(5)
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>shape: (5, 5)
┌──────────────┬─────────────┬──────────────┬─────────────┬─────────┐
│ sepal_length ┆ sepal_width ┆ petal_length ┆ petal_width ┆ species │
│ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---     │
│ f64          ┆ f64         ┆ f64          ┆ f64         ┆ str     │
╞══════════════╪═════════════╪══════════════╪═════════════╪═════════╡
│ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa  │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa  │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa  │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa  │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌┤
│ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa  │
└──────────────┴─────────────┴──────────────┴─────────────┴─────────┘
</code></pre>
<h3 id="filtering"><a class="header" href="#filtering">Filtering</a></h3>
<p>What are the rows with sepal length greater than 5?</p>
<pre><code class="language-python">&gt;&gt;&gt; df.filter(pl.col('sepal_length') &gt; 5)
shape: (118, 5)
┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┐
│ sepal_length ┆ sepal_width ┆ petal_length ┆ petal_width ┆ species   │
│ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       │
│ f64          ┆ f64         ┆ f64          ┆ f64         ┆ str       │
╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╡
│ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ 5.4          ┆ 3.9         ┆ 1.7          ┆ 0.4         ┆ setosa    │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ 5.4          ┆ 3.7         ┆ 1.5          ┆ 0.2         ┆ setosa    │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ 5.8          ┆ 4.0         ┆ 1.2          ┆ 0.2         ┆ setosa    │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ ...          ┆ ...         ┆ ...          ┆ ...         ┆ ...       │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica │
├╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌┤
│ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica │
└──────────────┴─────────────┴──────────────┴─────────────┴───────────┘
</code></pre>
<p>See that Polars operate with this notion of “expressions”. See <a href="https://pola-rs.github.io/polars-book/user-guide/dsl/intro.html">their guide</a> for more info.</p>
<h3 id="summary-statistics"><a class="header" href="#summary-statistics">Summary Statistics</a></h3>
<p>What is the average sepal length of the <code>setosa</code> species?</p>
<pre><code class="language-python">&gt;&gt;&gt; df.filter(pl.col('species') == 'setosa').select(pl.col('sepal_length').mean().alias('avg_sepal_length'))
shape: (1, 1)
┌──────────────────┐
│ avg_sepal_length │
│ ---              │
│ f64              │
╞══════════════════╡
│ 5.006            │
└──────────────────┘
</code></pre>
<h2 id="starting-with-belinda"><a class="header" href="#starting-with-belinda">Starting with Belinda</a></h2>
<p>Let’s get started analyzing some clusters. The goal is to notice how similar
it is manipulating the Iris dataset compared to manipulating a clustering. Assuming that you have the following two files:</p>
<ol>
<li><code>com-amazon.ungraph.txt</code> - from <a href="http://snap.stanford.edu/data/bigdata/communities/com-amazon.ungraph.txt.gz">SNAP</a>, with comments removed</li>
<li><code>com-amazon.leiden.txt</code> - from running Leiden, default mode (CPM optimization, r = 0.2)</li>
</ol>
<p>The latter can be generated by running the following command (<code>runleiden</code> from <a href="https://pypi.org/project/runleiden/">here</a>):</p>
<pre><code class="language-bash">runleiden -i com-amazon.ungraph.txt -r 0.2 -o com-amazon.leiden.txt
</code></pre>
<p>We have also provided these files for your convenience <a href="https://github.com/RuneBlaze/com-amazon-example">here</a>.</p>
<h3 id="basic-exploration"><a class="header" href="#basic-exploration">Basic exploration</a></h3>
<pre><code class="language-python">import belinda as bl
import polars as pl

g = bl.Graph(&quot;com-amazon.ungraph.txt&quot;)
g.summary()
</code></pre>
<p>Output:</p>
<pre><code class="language-python">shape: (1, 4)
┌────────┬────────┬────────────────┬───────────────────┐
│ n      ┆ m      ┆ num_components ┆ largest_component │
│ ---    ┆ ---    ┆ ---            ┆ ---               │
│ u32    ┆ u64    ┆ u32            ┆ u32               │
╞════════╪════════╪════════════════╪═══════════════════╡
│ 334863 ┆ 925872 ┆ 1              ┆ 334863            │
└────────┴────────┴────────────────┴───────────────────┘
</code></pre>
<p>So we know that this graph has 334863 nodes and 925872 edges, and that it is a single component.</p>
<pre><code class="language-python">print(g.n, g.m)
</code></pre>
<p><strong>Output:</strong></p>
<pre><code>334863 925872
</code></pre>
<p>Now let’s actually load the clustering. Leiden clusters are given in the so-called “membership” format (explained <a href="./clustering_formats.html">here</a>).
Belinda’s clusterings should always be paired with graphs, so let’s also pass in <code>g</code>, the graph we just loaded:</p>
<pre><code class="language-python">c = bl.read_membership(g, &quot;com-amazon.leiden.txt&quot;)
c
</code></pre>
<p><strong>Output: (truncated)</strong></p>
<pre><code class="language-python">shape: (85036, 6)
┌────────┬───────────────┬─────┬─────┬─────┬─────┐
│ label  ┆ nodes         ┆ n   ┆ m   ┆ c   ┆ mcd │
│ ---    ┆ ---           ┆ --- ┆ --- ┆ --- ┆ --- │
│ i64    ┆ binary        ┆ u64 ┆ u64 ┆ u64 ┆ u64 │
╞════════╪═══════════════╪═════╪═════╪═════╪═════╡
│ 32880  ┆ [binary data] ┆ 4   ┆ 5   ┆ 1   ┆ 2   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 29416  ┆ [binary data] ┆ 4   ┆ 3   ┆ 15  ┆ 1   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 10240  ┆ [binary data] ┆ 8   ┆ 21  ┆ 13  ┆ 4   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 137512 ┆ [binary data] ┆ 1   ┆ 0   ┆ 2   ┆ 0   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ ...    ┆ ...           ┆ ... ┆ ... ┆ ... ┆ ... │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 55193  ┆ [binary data] ┆ 2   ┆ 1   ┆ 3   ┆ 1   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
</code></pre>
<p>Let’s take a closer look here. What do these columns and rows mean?
First, Belinda operates under the data model that
this so-called <strong>cluster data frame</strong> has each row representing a cluster, and this cluster data frame is simply implemented as a Polars data frame.
The columns can be described as follows:</p>
<ul>
<li><code>label</code>: the name of this cluster. Note that it need not be an integer.</li>
<li><code>nodes</code>: a special column containing all the nodes of this cluster. Although representing this as a <code>list[int]</code> might be more intuitive, Belinda at this moment stores a compressed bitmap (roaring bitmap) in this column, therefore shown as an opaque <code>[binary data]</code>.</li>
<li><code>n</code>, <code>m</code>, <code>c</code>: these are the variables denoted at the top of this page, the number of nodes, the number of internal edges, the number of external edges relative to this cluster, respectively. An important tip to emphasize again is that these variables generate other statistics, for example \(\frac{2 m}{n}\) is the average degree of a node in this cluster.</li>
<li><code>mcd</code>: the minimum core degree of this cluster, defined as the minimum degree of the subgraph induced on this cluster.</li>
</ul>
<p>With that explained, let’s take a closer look at this clustering. First, it makes sense to reorder the clusters by sorting decreasingly by cluster sizes. We just reuse what is provided in Polars for us to sort this data frame:</p>
<pre><code class="language-python">c = c.sort(pl.col('n'), reverse=True)
</code></pre>
<p><code>c</code> now looks like this (truncated output):</p>
<pre><code class="language-python">shape: (85036, 6)
┌────────┬───────────────┬─────┬─────┬─────┬─────┐
│ label  ┆ nodes         ┆ n   ┆ m   ┆ c   ┆ mcd │
│ ---    ┆ ---           ┆ --- ┆ --- ┆ --- ┆ --- │
│ i64    ┆ binary        ┆ u64 ┆ u64 ┆ u64 ┆ u64 │
╞════════╪═══════════════╪═════╪═════╪═════╪═════╡
│ 0      ┆ [binary data] ┆ 26  ┆ 115 ┆ 128 ┆ 5   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 8      ┆ [binary data] ┆ 25  ┆ 110 ┆ 537 ┆ 5   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 7      ┆ [binary data] ┆ 25  ┆ 106 ┆ 83  ┆ 5   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 6      ┆ [binary data] ┆ 25  ┆ 107 ┆ 85  ┆ 5   │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ ...    ┆ ...           ┆ ... ┆ ... ┆ ... ┆ ... │
├╌╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
</code></pre>
<p>Some information we immediately gathered:</p>
<ol>
<li>There are 85036 clusters generated by Leiden</li>
<li>The largest cluster has 26 nodes</li>
</ol>
<p>At this point we might even conclude that enough is done: getting the number of nodes and edges per each cluster is already not entirely trivial, so let’s just export what we gathered to a CSV file:</p>
<pre><code class="language-python"># &quot;nodes&quot; is of type binary, hence not writable to CSV
&gt;&gt;&gt; c.drop(&quot;nodes&quot;).write_csv(&quot;com-amazon.leiden.stats.csv&quot;)
&gt;&gt;&gt; !head com-amazon.leiden.stats.csv
label,n,m,c,mcd
0,26,115,128,5
8,25,110,537,5
7,25,106,83,5
6,25,107,85,5
5,25,107,97,5
4,25,104,13,5
3,25,107,66,4
11,25,101,76,5
10,25,111,62,5
</code></pre>
<p>Honestly, not bad. One can even write it as a Parquet file for much faster loading next time analyzing this clustering:</p>
<pre><code class="language-python"># If we want to completely save `c` to load it next time quickly
c.write_parquet(&quot;./com-amazon.leiden.parquet&quot;)
# pl.read_parquet(&quot;./com-amazon.leiden.parquet&quot;) retrieves it for later
</code></pre>
<p>But let’s do something more fun this time. Let’s just say that we are interested in the larger clusters,
those at least 50th percentile in size. We can do this by filtering the data frame:</p>
<pre><code class="language-python">&gt;&gt;&gt; c50 = c.filter(pl.col('n') &gt;= pl.col('n').quantile(0.5))
&gt;&gt;&gt; c50
shape: (49716, 6)
┌───────┬───────────────┬─────┬─────┬─────┬─────┐
│ label ┆ nodes         ┆ n   ┆ m   ┆ c   ┆ mcd │
│ ---   ┆ ---           ┆ --- ┆ --- ┆ --- ┆ --- │
│ i64   ┆ binary        ┆ u64 ┆ u64 ┆ u64 ┆ u64 │
╞═══════╪═══════════════╪═════╪═════╪═════╪═════╡
│ 0     ┆ [binary data] ┆ 26  ┆ 115 ┆ 128 ┆ 5   │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 8     ┆ [binary data] ┆ 25  ┆ 110 ┆ 537 ┆ 5   │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 7     ┆ [binary data] ┆ 25  ┆ 106 ┆ 83  ┆ 5   │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ 6     ┆ [binary data] ┆ 25  ┆ 107 ┆ 85  ┆ 5   │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
│ ...   ┆ ...           ┆ ... ┆ ... ┆ ... ┆ ... │
├╌╌╌╌╌╌╌┼╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┼╌╌╌╌╌┤
</code></pre>
<p>Let’s export this file back into the membership format, since it does seem like a widely used format for clustering:</p>
<pre><code class="language-python">&gt;&gt;&gt; bl.write_membership(g, c50, &quot;./com-amazon.leiden.50.txt&quot;)
&gt;&gt;&gt; !head com-amazon.leiden.50.txt
1	18951
88160	18951
118052	35215
161555	18951
244916	19694
346495	18951
444232	47430
447165	39248
500600	18951
2	3680
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="intro.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="gather_statistics.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="intro.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="gather_statistics.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
